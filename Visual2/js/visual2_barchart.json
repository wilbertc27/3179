{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A simple pie chart with labels.",
    "background":"lightyellow",
    "width":300,
    "height":300,
    "data": {
      "values": [
        {"category": "Total Deaths", "value": 15538,"WHO_REGION":"Africa"},
        {"category": "Total Recovered", "value": 604326,"WHO_REGION":"Africa"},
        {"category": "Active Cases", "value": 232162,"WHO_REGION":"Africa"},

        {"category": "Total Deaths", "value": 384637,"WHO_REGION":"Americas"},
        {"category": "Total Recovered", "value": 6259733,"WHO_REGION":"Americas"},
        {"category": "Active Cases", "value": 3808482,"WHO_REGION":"Americas"},

        {"category": "Total Deaths", "value": 42376,"WHO_REGION":"EasternMediterranean"},
        {"category": "Total Recovered", "value": 1340094,"WHO_REGION":"EasternMediterranean"},
        {"category": "Active Cases", "value": 223396,"WHO_REGION":"EasternMediterranean"},

        {"category": "Total Deaths", "value": 215564,"WHO_REGION":"Europe"},
        {"category": "Total Recovered", "value": 2047446,"WHO_REGION":"Europe"},
        {"category": "Active Cases", "value": 566295,"WHO_REGION":"Europe"},

        {"category": "Total Deaths", "value": 50624,"WHO_REGION":"South-EastAsia"},
        {"category": "Total Recovered", "value": 1621081,"WHO_REGION":"South-EastAsia"},
        {"category": "Active Cases", "value": 755194,"WHO_REGION":"South-EastAsia"},
        
        {"category": "Total Deaths", "value": 3975,"WHO_REGION":"WesternPacific"},
        {"category": "Total Recovered", "value": 182319,"WHO_REGION":"WesternPacific"},
        {"category": "Active Cases", "value": 80820,"WHO_REGION":"WesternPacific"}
      ]
    },
    "transform":[{"filter": "datum['category'] == WHO_Region_Selection||WHO_Region_Selection == null"}],
    "params":[
                  {
                  "name": "WHO_Region_Selection",
                  "bind": {
                            "input": "select",
                            "options": [null,
                                          "Total Deaths",
                                          "Total Recovered",
                                          "Active Cases"
                                        ],
                            "labels":["show all",
                                          "Total Deaths",
                                          "Total Recovered",
                                          "Active Cases"
                                      ],
                            "name": "Category:"
                          }
                  }
                ],
  "layer": [{
    "mark": {"type": "arc", "innerRadius": 30, "stroke": "#fff"}
  }]
    ,
  "encoding": {
    "theta": {"field": "value", "type": "quantitative", "stack": true},
    "radius": {"field": "value", "scale": {"type": "sqrt", "zero": true, "rangeMin": 30}},
    "color": {"field": "WHO_REGION", "type": "nominal"},
    "tooltip":[
                  {"field": "WHO_REGION", "type": "nominal",  "title":"Who Region"},
                  {"field": "category", "type": "nominal","title":"Category"},
                  {"field": "value", "type": "quantitative", "format": ",","title":"Value"}]
    }
  }
